$(document).ready(function () {
    let pagination = new Paginate({
        itemPerPage: 7,
        selector: ".paginate"
    });
    $("body").on("click", "ul.pagination>li.page-element>a.page", function (event) {
        event.preventDefault();
        pagination.show($(this).attr("data-target"));
    });
});

class Paginate {
    constructor(obj) {
        this.element = $(obj.selector);
        this.elementNumber = this.element.length;
        this.itemPerPage = (obj.itemPerPage) ? obj.itemPerPage : 5;
        this.pageNumber = this.elementNumber / this.itemPerPage;
        this.element.css({display: "none"});
        if (obj.selector)
            this.init();
    }
    init() {
        let elementIndex = 0;
        const itemPerPage = this.itemPerPage;
        this.element.parent().css({height: this.element.parent().height()}).attr("data-page", 0);
        this.element.fadeOut(250);
        this.element.each(function () {
            if (elementIndex < itemPerPage)
                $(this).delay(250).fadeIn(250);
            elementIndex++;
        });
        this.doPagination();
    }
    show(page) {
        let i = 0,
            begin = parseInt(page) * this.itemPerPage,
            end = (parseInt(page) + 1) * this.itemPerPage;
        $(".page-nbr-" + this.element.parent().attr("data-page")).parent().removeClass("current");
        $(".page-nbr-" + page).parent().addClass("current");
        $(this.element).fadeOut(250);
        while (i < this.elementNumber) {
            if (i >= begin && i < end) {
                $(this.element[i]).delay(250).fadeIn(250);
            }
            i++;
        }
    }
    doPagination() {
        let i = 0,
            pagination = "<ul class='pagination'>";
        while (i < this.pageNumber) {
            pagination += "<li class='page-element'><a href='#' class='page page-nbr-" + i + "' data-target='" + i + "'>" + (i + 1) + "</a></li>";
            i++;
        }
        pagination += "</ul>";
        this.element.parent().append(pagination);
    }
}